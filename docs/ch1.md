# Ch01 리팩터링: 첫 번째 예시

> 프로그램이 새로운 기능을 추가하기 편한 구조가 아니라면, 먼저 구조를 리팩터링하고 기능을 추가하자.

리팩터링의 첫 단계는 테스트 코드를 작성하는 것
- 테스트 코드는 자가진단하도록 만든다.
- 디버깅 시간이 줄어 전체 작업 시간 단축됨.

함수 추출하기
- 추출한 함수에는 그 코드가 하는 일을 설명하는 이름을 짓자.
- 리팩터링 후에는 항상 테스트 코드 실행하기.
- 조금씩 수정해서 피드백 주기를 짧게 가져가자.

변수 이름 명확히 하기
- 저자는 함수의 반환 값에 항상 `result`라는 이름을 사용함
- 좋은 코드는 하는 일이 명확히 드러나야 한다.
- 컴퓨터가 이해하는 코드는 바보도 작성할 수 있다. 사람이 이해하도록 작성하는 프로그래머가 진정한 실력자다.
  
임시 변수를 질의 함수로 바꾸기
- 긴 함수를 잘게 쪼갤 때 play 같은 지역 변수를 최대한 제거해야 추출 작업이 쉬워진다.
- 이를 위해 임시 변수를 질의 함수로 바꾸고, 필요할 때 질의 함수를 사용하자.

리팩터링 시 성능 문제
- 특별한 경우가 아니면 일단 무시하자.
- 리팩터링 때문에 성능이 떨어진다면, 리팩터링을 마무리하고 성능을 개선하자.
- 잘 다듬어진 코드는 성능 개선 작업도 훨씬 수월하다.

조건부 로직을 다형성으로 바꾸기
- 먼저 상속 계층부터 정의한다.
- 클래스에 로직을 담은 뒤에는, 타입 코드 대신 서브클래스를 사용하도록 변경한다.
- 이후 조건부 로직을 다형성을 사용하도록 변경한다.

마치며
- 좋은 코드를 가늠하는 확실한 방법은 '얼마나 수정하기 쉬운가'다.
- 코드를 건강하게 관리하려면 프로그래밍 팀의 현재와 이상의 차이에 항상 신경 쓰면서, 이상에 가까워지도록 리팩터링해야 한다.
- 리팩터링을 효과적으로 하는 핵심은, 단계를 잘게 나누는 것
